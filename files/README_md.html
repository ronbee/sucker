<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>README.md</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            README.md
        </h1>
        <ul class="files">
            <li>README.md</li>
            <li>Last modified: 2010-11-17 16:08:29 +0000</li>
        </ul>
    </div>

    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <h1>Sucker</h1>

<p>Sucker is a minimal Ruby wrapper to the <a href="https://affiliate-program.amazon.co.uk/gp/advertising/api/detail/main.html">Amazon Product Advertising API</a>. It runs on <a href="http://github.com/taf2/curb">curb</a> and <a href="http://github.com/rails/rails/blob/master/activesupport/lib/active_support/xml_mini/nokogiri.rb">the Nokogiri implementation of the XML Mini module</a> in Active Support. It's fast and supports <strong>the entire API</strong>.</p>

<p><img src="https://github.com/papercavalier/sucker/raw/master/electrolux.jpg" alt="Electrolux" /></p>

<h2>Usage</h2>

<p>Set up a worker.</p>

<pre><code>worker = Sucker.new(
  :locale =&gt; "us",
  :key    =&gt; "API KEY",
  :secret =&gt; "API SECRET")
</code></pre>

<p>Prepare a request.</p>

<pre><code>worker &lt;&lt; {
  "Operation"     =&gt; "ItemLookup",
  "IdType"        =&gt; "ASIN",
  "ItemId"        =&gt; some_asins,
  "ResponseGroup" =&gt; "ItemAttributes" }
</code></pre>

<p>Get a response.</p>

<pre><code>response = worker.get
</code></pre>

<p>Make sure nothing went <a href="http://gloss.papercavalier.com/2010/11/01/amazon-call-throttling-demystified.html">awry</a>.</p>

<pre><code>response.valid?
</code></pre>

<p>Now parse it.</p>

<pre><code>items = response.map("Item") do |item|
  # parse item
end
</code></pre>

<p>Repeat ad infinitum.</p>

<p><a href="http://github.com/papercavalier/sucker/tree/master/spec/integration/">Check my integration specs</a> for more detailed examples. See <a href="http://github.com/papercavalier/sucker/tree/master/spec/integration/twenty_items_spec.rb">twenty items</a> and <a href="http://github.com/papercavalier/sucker/tree/master/spec/integration/multiple_locales_spec.rb">multiple locales</a> for relatively advanced usage.</p>

<p>Read the source code and dive into the <a href="https://affiliate-program.amazon.co.uk/gp/advertising/api/detail/main.html">Amazon API docs</a>.</p>

<h2>Stubbing</h2>

<p>Use <a href="http://github.com/myronmarston/vcr">VCR</a> to stub your requests.</p>

<p>Match URIs on host only and create a new cassette for each query. <a href="http://github.com/papercavalier/sucker/blob/master/spec/support/vcr.rb">This is how my VCR setup looks like</a>.</p>

<h2>Compatibility</h2>

<p>Specs pass against Ruby 1.8.7 and Ruby 1.9.2.</p>

<p>Sucker works seamlessly with or without Rails.</p>

<p>Sucker won't work on JRuby. (We got Curl under the hood. It's worth the trade-off.)</p>

<h2>Afterword</h2>

<p>No DSL. No object mapping. Pure Nokogiri goodness.</p>
<script type="text/javascript">$(function() {
  $('a').each(function() { $(this).attr('target', '_blank') })
})</script>

    </div>
    

    

    
    

    
    

    

    

    

    

    

    
</div>
    </div>
  </body>
</html>